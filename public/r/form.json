{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "form",
  "title": "Form",
  "description": "fly-byデザインシステムのFormコンポーネント。react-hook-form統合フォーム。",
  "dependencies": [
    "@radix-ui/react-label",
    "@radix-ui/react-slot",
    "react-hook-form"
  ],
  "registryDependencies": [
    "https://fly-by.design.yukyu.net/r/label.json"
  ],
  "files": [
    {
      "path": "registry/fly-by/ui/form.tsx",
      "content": "import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  ControllerProps,\n  FieldPath,\n  FieldValues,\n  FormProvider,\n  useFormContext,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { FbLabel } from \"@/registry/fly-by/ui/fb-label\"\n\n/**\n * fly-by Form\n *\n * react-hook-form のラッパー。バリデーション、エラー表示を統合。\n *\n * クラス構造: form, fb-form-item, fb-form-label, fb-form-control, fb-form-description, fb-form-message\n *\n * @example\n * const form = useForm<FormValues>()\n *\n * <Form {...form}>\n *   <form onSubmit={form.handleSubmit(onSubmit)}>\n *     <FormField\n *       control={form.control}\n *       name=\"email\"\n *       render={({ field }) => (\n *         <FormItem>\n *           <FormLabel>メールアドレス</FbFormLabel>\n *           <FormControl>\n *             <FbInput {...field} />\n *           </FbFormControl>\n *           <FormDescription>連絡先として使用します。</FbFormDescription>\n *           <FormMessage />\n *         </FbFormItem>\n *       )}\n *     />\n *   </form>\n * </Form>\n */\n\nconst Form = FormProvider\n\ntype FbFormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FbFormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FbFormFieldContextValue\n)\n\nfunction FbFormField<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({ ...props }: ControllerProps<TFieldValues, TName>) {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FbFormFieldContext.Provider>\n  )\n}\n\nconst useFbFormField = () => {\n  const fieldContext = React.useContext(FbFormFieldContext)\n  const itemContext = React.useContext(FbFormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFbFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FbFormItemContextValue = {\n  id: string\n}\n\nconst FbFormItemContext = React.createContext<FormItemContextValue>(\n  {} as FbFormItemContextValue\n)\n\nfunction FbFormItem({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn(\"form-item space-y-2\", className)}\n        {...props}\n      />\n    </FbFormItemContext.Provider>\n  )\n}\n\nfunction FbFormLabel({\n  className,\n  ...props\n}: React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>) {\n  const { error, formItemId } = useFbFormField()\n\n  return (\n    <FbLabel\n      data-slot=\"form-label\"\n      className={cn(\n        \"form-label\",\n        error && \"text-red-600 dark:text-red-400\",\n        className\n      )}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n}\n\nfunction FbFormControl({\n  ...props\n}: React.ComponentPropsWithoutRef<typeof Slot>) {\n  const { error, formItemId, formDescriptionId, formMessageId } =\n    useFbFormField()\n\n  return (\n    <Slot\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n}\n\nfunction FbFormDescription({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLParagraphElement>) {\n  const { formDescriptionId } = useFbFormField()\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn(\n        \"form-description text-[0.8rem] text-gray-500 dark:text-gray-400\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FbFormMessage({\n  className,\n  children,\n  ...props\n}: React.HTMLAttributes<HTMLParagraphElement>) {\n  const { error, formMessageId } = useFbFormField()\n  const body = error ? String(error?.message) : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn(\n        \"form-message text-[0.8rem] font-medium text-red-600 dark:text-red-400\",\n        className\n      )}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n}\n\nexport {\n  useFbFormField,\n  Form,\n  FbFormItem,\n  FbFormLabel,\n  FbFormControl,\n  FbFormDescription,\n  FbFormMessage,\n  FbFormField,\n}\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}